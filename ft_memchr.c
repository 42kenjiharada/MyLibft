/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_memchr.c                                        :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: kharada <kharada@student.42.fr>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/10/30 18:44:53 by kharada           #+#    #+#             */
/*   Updated: 2025/03/19 15:36:58 by kharada          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

/*
memchr は 標準ライブラリ <string.h> に含まれる関数で、
指定したメモリ領域の中から、特定のバイト値を検索する関数。
7. memchr の注意点
✅ バイナリデータ（\0 を含むデータ）も検索できる
✅ 戻り値は value を指すポインタ（NULL の可能性あり）
✅ NULL 終端 \0 を考慮しないので、strchr とは異なる
❌ 見つからない場合は NULL なので、NULL チェックを忘れない！

8. memchr のまとめ
✅ メモリ領域の中から特定のバイト値を検索する関数
✅ NULL 終端 \0 を考慮しないので、バイナリデータにも使える
✅ 戻り値は見つかったバイトのポインタ、見つからないと NULL
✅ バイナリ検索、データ解析、文字列の一部検索などに便利！
❌ NULL チェックを忘れるとバグる可能性がある

c は int 型として渡される が、実際には unsigned char（0～255）の範囲で比較される。

c = (unsigned char)c; の処理
memchr の仕様では、比較対象となる c は unsigned char として扱われる 必要があります。
c = (unsigned char)c; によって、c の値が 0～255 の範囲に正規化 され、unsigned char 型のデータと正しく比較できます。

while (n--)
n の回数だけループし、メモリを 1 バイトずつチェックする。
*str == c の条件に合致したら、そのアドレスを return。
n が 0 になったら、何も見つからなかったので NULL を返す。
これは 標準の memchr の動作と同じ です。

return (NULL); は、検索対象のバイト値がメモリ内で見つからなかった場合に「見つからなかった」ことを示すための返り値 です。
つまり、memchr が NULL を返すときは、「指定した n バイトの範囲内に検索対象のバイトがなかった」という意味になります。
*/
#include "libft.h"

void	*ft_memchr(const void *s, int c, size_t n)
{
	unsigned char	*str;

	c = (unsigned char)c;
	str = (unsigned char *) s;
	while (n--)
	{
		if (*str == c)
			return (str);
		str++;
	}
	return (NULL);
}
