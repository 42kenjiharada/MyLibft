/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_substr.c                                        :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: kharada <kharada@student.42.fr>            +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/11/02 13:54:58 by kharada           #+#    #+#             */
/*   Updated: 2025/03/20 01:18:10 by kharada          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

/*
Cè¨€èªžã«ã¯ substr ã¨ã„ã†æ¨™æº–é–¢æ•°ã¯ãªã„ã‘ã©ã€
éƒ¨åˆ†æ–‡å­—åˆ—ï¼ˆsubstringï¼‰ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã‚’è‡ªä½œ ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ï¼
ã“ã“ã§ã¯ã€Cè¨€èªžã§ æ–‡å­—åˆ—ã®ä¸€éƒ¨ã‚’æŠœãå‡ºã™æ–¹æ³•ï¼ˆsubstringï¼‰ ã‚’è§£èª¬ã™ã‚‹ã‚ˆã€‚
6. substr ã®æ³¨æ„ç‚¹
âœ… Cè¨€èªžã«ã¯æ¨™æº–ã® substr ã¯ãªã„ã®ã§ã€è‡ªä½œãŒå¿…è¦
âœ… malloc ã§ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã™ã‚‹ã®ã§ã€ä½¿ç”¨å¾Œã« free() ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
âœ… start ãŒ src ã®é•·ã•ä»¥ä¸Šãªã‚‰ç©ºæ–‡å­—åˆ—ã‚’è¿”ã™
âœ… len ãŒ src ã®é•·ã•ã‚’è¶…ãˆãªã„ã‚ˆã†ã«èª¿æ•´

7. ã¾ã¨ã‚
âœ… Cè¨€èªžã«ã¯ substr ã¯ãªã„ã®ã§ malloc ã‚’ä½¿ã£ã¦è‡ªä½œã™ã‚‹ï¼
âœ… memcpy ã‚„ strncpy ã‚’ä½¿ã„ã€å®‰å…¨ã«éƒ¨åˆ†æ–‡å­—åˆ—ã‚’å–å¾—ã™ã‚‹
âœ… å–å¾—å¾Œã¯ free() ã—ãªã„ã¨ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®åŽŸå› ã«ãªã‚‹
âœ… strstr ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€éƒ¨åˆ†æ–‡å­—åˆ—ã®æ¤œç´¢ã‚„å–å¾—ãŒã§ãã‚‹ï¼

substr ã®æ¨™æº–çš„ãªä»•æ§˜
ðŸ”¹ substr ã®å‹•ä½œ
ï¼‘ï¼‰src ã®é•·ã•ã‚’å–å¾— (ft_strlen(src))
ï¼’ï¼‰start >= src_len ã®å ´åˆã¯ç©ºæ–‡å­—åˆ—ã‚’è¿”ã™
ï¼“ï¼‰start + len > src_len ã®å ´åˆã¯ã€len ã‚’ src_len - start ã«èª¿æ•´
ï¼”ï¼‰malloc(len + 1) ã§ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿
ï¼•ï¼‰ft_strlcpy(dst, src + start, len + 1) ã§éƒ¨åˆ†æ–‡å­—åˆ—ã‚’ã‚³ãƒ”ãƒ¼
ï¼–ï¼‰ç¢ºä¿ã«å¤±æ•—ã—ãŸã‚‰ NULL ã‚’è¿”ã™

substrã®æ©Ÿèƒ½ã«ã¤ã„ã¦
éƒ¨åˆ†æ–‡å­—åˆ—ï¼ˆsubstringï¼‰ã¨ã¯
ä¸€ã¤ã®æ–‡å­—åˆ—ã‹ã‚‰ã€ç‰¹å®šã®é–‹å§‹ä½ç½®ã‹ã‚‰ä¸€å®šã®é•·ã•ã ã‘ã‚’åˆ‡ã‚Šå‡ºã—ãŸæ–‡å­—åˆ—ã®ã“ã¨ã§ã™ã€‚
å¤šãã®é«˜æ°´æº–è¨€èªžï¼ˆä¾‹ãˆã°ã€Pythonã®str[start:end]ã‚„JavaScriptã®
substringãƒ¡ã‚½ãƒƒãƒ‰ãªã©ï¼‰ã§ã¯ã€éƒ¨åˆ†æ–‡å­—åˆ—ã‚’å®¹æ˜“ã«å–å¾—ã§ãã‚‹é–¢æ•°ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ãŒ
ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ãŒã€Cè¨€èªžã«ã¯æ¨™æº–ã§ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚

Cè¨€èªžã§ã®substrã®å¿…è¦æ€§
Cè¨€èªžã§ã¯ã€æ–‡å­—åˆ—æ“ä½œã«ãŠã„ã¦æ‰‹å‹•ã§ãƒã‚¤ãƒ³ã‚¿æ“ä½œã‚„ãƒ¡ãƒ¢ãƒªç®¡ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€
ã“ã†ã—ãŸéƒ¨åˆ†æ–‡å­—åˆ—ã‚’å–ã‚Šå‡ºã™ãŸã‚ã®é–¢æ•°ï¼ˆä¾‹ï¼šft_substrï¼‰ã‚’
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã‚ˆãè¡Œã‚ã‚Œã¾ã™ã€‚
ã“ã®å®Ÿè£…ã¯ã€ä¸Žãˆã‚‰ã‚ŒãŸæ–‡å­—åˆ—ã®æŒ‡å®šã•ã‚ŒãŸä½ç½®ã‹ã‚‰å®‰å…¨ã«éƒ¨åˆ†æ–‡å­—åˆ—ã‚’æŠ½å‡ºã—ã€
å‹•çš„ãƒ¡ãƒ¢ãƒªç¢ºä¿ã‚’è¡Œã„ã€ãƒŒãƒ«çµ‚ç«¯ã‚‚ä¿è¨¼ã—ã¦ã„ã‚‹ãŸã‚ã€å®Ÿç”¨çš„ã‹ã¤ä¸€èˆ¬çš„ãªå®Ÿè£…ã¨ã„ãˆã¾ã™ã€‚

 substrï¼ˆéƒ¨åˆ†æ–‡å­—åˆ—ï¼‰ã¨ã¯ï¼Ÿ
ðŸ”¹ substrã®ä¸€èˆ¬çš„ãªæ©Ÿèƒ½
ã€Œéƒ¨åˆ†æ–‡å­—åˆ—ï¼ˆsubstringï¼‰ã€ã¨ã¯ã€æ–‡å­—åˆ—ã®ä¸€éƒ¨ã‚’æŠ½å‡ºã™ã‚‹æ©Ÿèƒ½ã®ã“ã¨ã€‚
ä¾‹ãˆã°ã€"Hello, World!" ã‹ã‚‰ "World" ã ã‘ã‚’å–ã‚Šå‡ºã—ãŸã„ã¨ãã€
Cè¨€èªžã«ã¯æ¨™æº–ã®é–¢æ•°ãŒãªã„ã®ã§ã€è‡ªå‰ã§ft_substrã®ã‚ˆã†ãªé–¢æ•°ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
*/

#include "libft.h"

char	*ft_substr(char const *src, size_t start, size_t len)
{
	size_t	src_len;
	char	*dst;

	if (src == NULL)
		return (ft_strdup(""));
	src_len = ft_strlen(src);
	if (start >= src_len)
		return (ft_strdup(""));
	if (len > src_len - start)
		len = src_len - start;
	dst = malloc(sizeof(char) * (len + 1));
	if (dst == NULL)
		return (NULL);
	ft_strlcpy(dst, (src + start), len + 1);
	return (dst);
}
